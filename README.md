# Next.js のチュートリアル

## pages ディレクトリについて

- Next.js では、ページとは pages ディレクトリに存在するファイルからエクスポートされる React コンポーネント
- ページは ファイル名 に基づいてルーティングに関連づけられる  
  -ファイルへのパスが URL のパスになる
  -pages/index.js は / にルーティングされる  
  -pages/posts/first-post.js は /posts/first-post としてルーティングされる

---

## リンクを貼る

`<Link>` を用いてリンクを作成する
※Next.js のアプリの外にある外部のページにリンクを貼る必要があるときは、 Link 無しで `<a>` タグを使う
#className といった属性を加える必要があるときは、 Link タグでなく、a タグに加える

## アセット

Next.js は画像などの静的なファイルを、public ディレクトリ 配下で読み取ることができる
pages ディレクトリと同様に、public 内のファイルはアプリケーションのルート（root）から参照することができる

## メタデータ

`<Head>`を用いて`<head>`を修正することが可能。
`<Head>`は Next.js に組み込まれている React コンポーネント。next/head モジュールからインポートできる

## CSS スタイリング

- グローバルなスタイリング
  グローバルな CSS ファイルを読み込むには、pages ディレクトリ配下に \_app.js というファイルを作成 し、記述する
  \_app.js を追加したときは開発サーバを再起動する必要がある
  Next.js では、グローバル CSS ファイルを \_app.js 内でインポートすることでグローバル CSS を利用することができる。それ以外の場所ではグローバル CSS をインポートすることはできない

## プリレンダリング

デフォルトで、Next.js はすべてのページをプリレンダリングする
つまり、Next.js は、クライアント側の JavaScript ですべてのレンダリングを行うのではなく、あらかじめ各ページの HTML を生成しておくということ = SSR
プレーンな React でアプリを作った場合、プリレンダリングは行われない。したがって、JavaScript を無効にするとアプリは表示されなくなってしまう

![image](https://user-images.githubusercontent.com/66477859/144738184-a1e0b674-2759-4e38-8c15-cc1b0ae2b63b.png)

### Next.js におけるプリレンダリングの 2 つの形式

- 静的生成（Static Generation）
  ビルド時 に HTML を生成するプリレンダリング手法です。プリレンダリングされた HTML は各リクエストに対して 再利用 される

- サーバサイドレンダリング（SSR）
  毎回のリクエストごとに HTML を生成するプリレンダリング手法

  開発モード（npm run dev あるいは yarn dev を実行したとき）では、静的生成を使用しているページであっても、すべてのページが毎回のリクエストごとにプリレンダリングされる

![image](https://user-images.githubusercontent.com/66477859/144738184-a1e0b674-2759-4e38-8c15-cc1b0ae2b63b.png)

![image](https://user-images.githubusercontent.com/66477859/144738289-f20027b6-d0b4-4b9b-ad6f-19e8023dca87.png)

Next.js ではページごとにどちらのプリレンダリング形式を使用するか **選択** できる  
 -ほとんどのページにおいて静的生成（Static Generation）を使用しつつ、残る一部のページはサーバサイドレンダリングを使用するというような「ハイブリッド」な Next.js アプリを作ることが可能となる
